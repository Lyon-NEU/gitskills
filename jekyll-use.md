 #Windows安装jekyll

##准备环境
1. 安装[ruby](http://rubyinstaller.org/downloads/)  
	我安装的是Ruby 2.0.0-p353
1. 安装[Ruby Development Kit](http://rubyinstaller.org/downloads/)  
	我安装的是DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe（For use with Ruby 2.0 (32bits version only)）  
	注意这里开发工具包要和ruby安装包版本匹配  
	解压DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe到c:\devkit
1. 安装[Python](http://www.python.org/getit/)或者[Portable Python](http://portablepython.com/wiki/PortablePython2.7.5.1/)
	这里极力推荐安装python2.7.x系列而不是3.x系列

ps.[ruby中文](https://www.ruby-lang.org/zh_cn/downloads/)
##执行配置
**1.运行命令**
<pre>
C:\devkit>ruby dk.rb init
[INFO] found RubyInstaller v2.0.0 at C:/ruby

Initialization complete! Please review and modify the auto-generated
'config.yml' file to ensure it contains the root directories to all
of the installed Rubies you want enhanced by the DevKit.
</pre>
这一步是为了产生config.yml供之后使用

**2.编辑查看config.yml，确认里面配置的ruby安装目录正确**
<pre>
# This configuration file contains the absolute path locations of all
# installed Rubies to be enhanced to work with the DevKit. This config
# file is generated by the 'ruby dk.rb init' step and may be modified
# before running the 'ruby dk.rb install' step. To include any installed
# Rubies that were not automagically discovered, simply add a line below
# the triple hyphens with the absolute path to the Ruby root directory.
#
# Example:
#
# ---
# - C:/ruby19trunk
# - C:/ruby192dev
#
---
- C:/ruby
</pre>

**3.执行命令**
<pre>
C:\devkit>ruby dk.rb install
[INFO] Updating convenience notice gem override for 'C:/ruby'
[INFO] Installing 'C:/ruby/lib/ruby/site_ruby/devkit.rb'
</pre>
这一步是安装devkit关联到ruby，同时安装或者更新了一个operating_system.rb文件到ruby安装目录


**4.安装jekyll[保证网络畅通，否则安装失败] ** 
  执行命令*gem install jekyll*
<pre>
C:\devkit>gem install jekyll
Fetching: liquid-2.5.5.gem (100%)
Successfully installed liquid-2.5.5
Fetching: fast-stemmer-1.0.2.gem (100%)
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
Successfully installed fast-stemmer-1.0.2
Fetching: classifier-1.3.4.gem (100%)
Successfully installed classifier-1.3.4
Fetching: rb-fsevent-0.9.4.gem (100%)
Successfully installed rb-fsevent-0.9.4
Fetching: ffi-1.9.3-x86-mingw32.gem (100%)
Successfully installed ffi-1.9.3-x86-mingw32
......
Installing ri documentation for jekyll-1.4.3
21 gems installed
</pre>

查看jekyll版本
<pre>
C:\myblog>jekyll --version
jekyll 1.4.3
</pre>

**附加步骤1.好了现在可以使用jekyll啦【此步骤可省略】**   
如果需要代码高亮，可以安装pygments，跟随接下来的步骤

**附加步骤2.需要安装[easy_install](https://pypi.python.org/pypi/setuptools#downloads)  【此步骤可省略】**  
下载了之后执行: *python setup.py install*

**附加步骤3.安装pygments【此步骤可省略】**
<pre>
C:\devkit>easy_install Pygments
Searching for Pygments
Reading https://pypi.python.org/simple/Pygments/
Best match: Pygments 1.6
Downloading https://pypi.python.org/packages/2.7/P/Pygments/Pygments-1.6-py2.7.egg#md5=1e1e52b1e434502682aab08938163034
Processing Pygments-1.6-py2.7.egg
creating c:\python27\lib\site-packages\Pygments-1.6-py2.7.egg
Extracting Pygments-1.6-py2.7.egg to c:\python27\lib\site-packages
Adding Pygments 1.6 to easy-install.pth file
Installing pygmentize-script.py script to C:\Python27\Scripts
Installing pygmentize.exe script to C:\Python27\Scripts
Installing pygmentize.exe.manifest script to C:\Python27\Scripts

Installed c:\python27\lib\site-packages\pygments-1.6-py2.7.egg
Processing dependencies for Pygments
Finished processing dependencies for Pygments
</pre>


**6.启动jekyll**    
一个新的博客应该能够通过<http://localhost:4000/>来访问，执行如下命令
<pre>
C:\>jekyll new myblog
New jekyll site installed in C:/myblog.

C:\>cd myblog

</pre>


####在执行jekyll serve命令之前，需要注意如下事项：  
为了能够让这里网站正常运行，**这里需要删除_post文件夹里的文件**（应该有一个xxxx-xx-xx-welcome-to- jekyll.markdown字样的文件），因为这个文件内部使用了语法高亮插件（另外不删，则可以修改配置文件禁用该语法高亮插件，即**修改根目录下 _config.yml中的pygments: true为false**便可。），这个需要另外安装，不再本文范围内，不删会导致生成的静态页面有问题，因时间有限本文暂不提此问题。  
所以我们刚才安装的高亮在windows下会有问题，我们暂时就不高亮了，如果不执行如上操作，会启动报错。

####执行jekyll serve命令如下：
<pre>
C:\myblog>jekyll serve
Configuration file: C:/myblog/_config.yml
            Source: C:/myblog
       Destination: C:/myblog/_site
      Generating... error: Invalid argument - C:/myblog/_site/C:. Use --trace to view backtrace
</pre>
发现，又是报错，可能是最新版本的jekyll在windows下有版本不兼容问题，我们重新安装一个指定版本的jekyll

####我们卸载已经安装的jekyll
<pre>
C:\devkit>gem uninstall jekyll
Remove executables:
        jekyll

in addition to the gem? [Yn]  Y
Removing jekyll
Successfully uninstalled jekyll-1.4.3
</pre>


####重新安装jekyll，指定版本号：  
<pre>
C:\devkit>gem install jekyll --version "=1.4.2"
Fetching: jekyll-1.4.2.gem (100%)
Successfully installed jekyll-1.4.2
Parsing documentation for jekyll-1.4.2
Installing ri documentation for jekyll-1.4.2
1 gem installed
</pre>


####重新创建博客目录，启动博客：
<pre>
C:\>rm -rf myblog
C:\>jekyll new myblog
New jekyll site installed in C:/myblog.

C:\>cd myblog

C:\myblog>rm -rf _posts

C:\myblog>jekyll serve
Configuration file: C:/myblog/_config.yml
            Source: C:/myblog
       Destination: C:/myblog/_site
      Generating... done.
    Server address: http://0.0.0.0:4000
  Server running... press ctrl-c to stop.
</pre>


####这个时候通过<http://localhost:4000/>来访问,也可通过jekyll server启动

查看gem环境变量
<pre>
C:\myblog>gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 2.0.14
  - RUBY VERSION: 2.0.0 (2013-11-22 patchlevel 353) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/ruby/lib/ruby/gems/2.0.0
  - RUBY EXECUTABLE: C:/ruby/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/ruby/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/ruby/lib/ruby/gems/2.0.0
     - C:/Users/Administrator/.gem/ruby/2.0.0
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - https://rubygems.org/
</pre>


---

#jekyll怎样创建一篇文章
##第一步，创建项目。
在你的电脑上，建立一个目录，作为项目的主目录。我们假定，它的名称为jekyll_demo。  
>mkdir jekyll_demo


对该目录进行git初始化。  
>cd jekyll_demo
>
>git init


然后，创建一个没有父节点的分支gh-pages。**因为github规定，只有该分支中的页面，才会生成网页文件**。  
>$ git checkout --orphan gh-pages


以下所有动作，都在该分支下完成。


##第二步，创建设置文件。
在项目根目录下，建立一个名为_config.yml的文本文件。它是jekyll的设置文件，我们在里面填入如下内容，其他设置都可以用默认选项，具体解释参见[官方网页](https://github.com/jekyll/jekyll/wiki/Configuration)

>baseurl: /jekyll_demo


目录结构变成：
<pre>
　/jekyll_demo
　　　　|--　_config.yml
</pre>


##第三步，创建模板文件。  
在项目根目录下，创建一个_layouts目录，用于存放模板文件。  
>$ mkdir _layouts


进入该目录，创建一个default.html文件，作为Blog的默认模板。并在该文件中填入以下内容。  
```html
　<!DOCTYPE html>
　　<html>
　　<head>
　　　　<meta http-equiv="content-type" content="text/html; charset=utf-8" />
　　　　<title>{{ page.title }}</title>
　　</head>
　　<body>

　　　　{{ content }}

　　</body>
　　</html>
```

Jekyll使用[Liquid](https://github.com/shopify/liquid/wiki/liquid-for-designers)模板语言，{{ page.title }}表示文章标题，{{ content }}表示文章内容，更多模板变量请参考[官方文档](https://github.com/jekyll/jekyll/wiki/Template-Data)。

目录结构变成：
<pre>
　/jekyll_demo
　　　　|--　_config.yml
　　　　|--　_layouts
　　　　|　　　|--　default.html
</pre>


##第四步，创建文章。

回到项目根目录，创建一个_posts目录，用于存放blog文章。
>mkdir _posts

进入该目录，创建第一篇文章。文章就是普通的文本文件，文件名假定为2014-01-21-hello-world.html。(注意，文件名必须为"年-月-日-文章标题.后缀名"的格式。如果网页代码采用html格式，后缀名为html；如果采用markdown格式，后缀名为md。）


在该文件中，填入以下内容：（注意，行首不能有空格）
```html
　---
　　layout: default
　　title: 你好，世界
　　---
　　<h2>{{ page.title }}</h2>
　　<p>我的第一篇文章</p>
　　<p>{{ page.date | date_to_string }}</p>
```


每篇文章的头部，必须有一个yaml文件头，用来设置一些元数据。它用三根短划线"---"，标记开始和结束，里面每一行设置一种元数据。"layout:default"，表示该文章的模板使用_layouts目录下的default.html文件；"title:你好，世界"，表示该文章的标题是"你好，世界"，如果不设置这个值，默认使用嵌入文件名的标题，即"hello world"。  
在yaml文件头后面，就是文章的正式内容，里面可以使用模板变量。{{ page.title }}就是文件头中设置的"你好，世界"，{{ page.date }}则是嵌入文件名的日期（也可以在文件头重新定义date变量），"| date_to_string"表示将page.date变量转化成人类可读的格式。  
目录结构变成：
<pre>
　/jekyll_demo
　　　　|--　_config.yml
　　　　|--　_layouts
　　　　|　　　|--　default.html 
　　　　|--　_posts
　　　　|　　　|--　2012-08-25-hello-world.html
</pre>


##第五步，创建首页。
有了文章以后，还需要有一个首页。  
回到根目录，创建一个index.html文件，填入以下内容。  
```html
---
　　layout: default
　　title: 我的Blog
　　---
　　<h2>{{ page.title }}</h2>
　　<p>最新文章</p>
　　<ul>
　　　　{% for post in site.posts %}
　　　　　　<li>{{ post.date | date_to_string }} <a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></li>
　　　　{% endfor %}
　　</ul>
```

它的Yaml文件头表示，首页使用default模板，标题为"我的Blog"。然后，首页使用了{% for post in site.posts %}，表示对所有帖子进行一个遍历。这里要注意的是，Liquid模板语言规定，输出内容使用两层大括号，单纯的命令使用一层大括号。至于{{site.baseurl}}就是_config.yml中设置的baseurl变量。  
目录结构变成：  
<pre>
　/jekyll_demo
　　　　|--　_config.yml
　　　　|--　_layouts
　　　　|　　　|--　default.html 
　　　　|--　_posts
　　　　|　　　|--　2014-01-21-hello-world.html
　　　　|--　index.html
</pre>


##第六步，发布内容。

现在，这个简单的Blog就可以发布了。先把所有内容加入本地git库。  
>git add .
>
>git commit -m "first post"


然后，前往github的网站，在网站上创建一个名为jekyll_demo的库。接着，再将本地内容推送到github上你刚创建的库。注意，下面命令中的username，要替换成你的username。

>git remote add origin git@github.com:username/jekyll_demo.git
>
>git push origin gh-pages



上传成功之后，等10分钟左右，访问<http://username.github.io/jekyll_demo/>就可以看到Blog已经生成了（将username换成你的用户名）。


all right : click me <http://cinowu.github.io/jekyll_demo/>


ps:article from runyifeng's [blog](http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html)


##btw
在往github推送之前，可以在本地通过jekyll启动测试一下  
可能会出现编码问题，更改vi _config.yml
<pre>
encoding: utf-8
#baseurl: /jekyll_demo
</pre>

在jekyll-demo目录下执行启动  
<pre>
$ jekyll build
Configuration file: f:/jekyll_demo/_config.yml
            Source: f:/jekyll_demo
       Destination: f:/jekyll_demo/_site
      Generating... done.

Administrator@PC121106ZS04 /f/jekyll_demo (gh-pages)
$ jekyll serve
Configuration file: f:/jekyll_demo/_config.yml
            Source: f:/jekyll_demo
       Destination: f:/jekyll_demo/_site
      Generating... done.
    Server address: http://0.0.0.0:4000
  Server running... press ctrl-c to stop.
</pre>

访问<http://localhost:4000>


##最后
我们可以参考下<https://github.com/jekyll/jekyll/wiki/sites>,这个链接中列举了许多用jekyll创建的github博客


##附加几种常用博客系统说明
###Jekyll 和 Octopress
Jekyll 和 Octopress 本是同源，所以本质上差别不大。Octopress 是基于 Jekyll 的。他们的关系就像 jQuery 与 js 的关系一样。  
jekyll建议用jekyll-bootstrap框架<https://github.com/rose1988c/jekyll-bootstrap>
Jekyll本是blog系统，但与wordpress不同，Jekyll是为静态文件blog而设计的，本地安装Jekyll后，可以使用jekyll   --server开启一个blog服务，也可以自己配置服务。jekyll的厉害之处也是她的原理是可以把markdown、textile等模板语言直接转换成html，还能像使用php等语言一样使用模板、引入模块，使用插件。markdown\textile语言是非常友好和方便的，是很多开发者非常喜爱和常用的静态模板语言，用于写博客和记录信息非常清晰便利。  
Github支持Jekyll（同一开发者），在内部已经配置好了Jekyll，允许用户把Jekyll博客当作一个项目发布到Github，博客的所有文件通过git管理，永远都不会丢失，只要用户提交，Github自动会调用Jekyll，为用户把md和textile转换成可访问的html，所以用户也可以不在本地先转换格式。另外Github为用户的博客项目配置独立服务，使得可以以<http://username.github.io>方式访问，更可以设置CNAME指定另外的域名，还有很多功能，自己去发掘吧。  
可以简单点理解，Jekyll是一套博客系统，而Github提供博客托管服务  
<http://yanping.me/cn/blog/2013/08/11/github-pages-step-by-step-video/>


**ekyll 和 Octopress上传发布细微区别:**
jekyll 可以直接用git上传 .md or .html 文件不需要编译  
Otcopress是makefile将文件转化.html发布。说的有点复杂了，其实就是编译成一个静态网站。  
Octopress 文章多了编译难免很慢  



###Hexo框架（Nodo.js）  
又多了一种选择。  
<http://zespia.tw/hexo/>
<https://github.com/tommy351/hexo>


###pelican（python）
<http://www.lizherui.com/pages/2013/08/17/build_blog.html#comment-1082841744>

###nico(node.js)
<http://lab.lepture.com/nico/zh/>

当你开始搭建一个个人博客的时候，会出现类似这么多的博客系统干扰你，我要坚持搞好jekyll!!!

###Toto
Toto是一个快捷的建立博客的工具，它的宣言就是十分钟建立一个博客。建站成功后有一个Achives列表模板和Article模板，可定制性非常强，也就是说需要有着很强的折腾精神。作者看到了一个用Toto搭建起来的博客，界面还是非常漂亮地，访问地址：使toto支持中文的技巧分享。  
Toto主页：<http://cloudhead.io/toto>  
Toto代码：<https://github.com/cloudhead/toto>  


jekyll、Toto和Octopress都是基于Ruby语言的，具体的安装方法可以在网上或对应主页查到

搭建博客可用的工具还有Bonsai和轻量级web框架Snatra等等，如果你够Geek，也可以去折腾折腾。

选定一个博客工具后，就可以将它部署到免费的云服务提供商那里，如Heroku、Github等，当然，你也可以部署到你自己的主机空间。
##接下来jekyll要做的事情
- 选择主题 
- 加上第三方
- 
- 系统
- 接入新浪腾讯微博
- 加入Google Analytics
- 加入Google Webmasters
- 申请域名，更换域名

参考  
<http://www.lizherui.com/pages/2013/08/17/build_blog.html#comment-1082841744>  
<http://beiyuu.com/why-blog/>  
<http://beiyuu.com/github-pages/#github>



---

#用Jekyll构建基于bootstrap模板
<http://jekyllbootstrap.com/usage/jekyll-quick-start.html>
##下载模板
1.从github下载模板
>git clone https://github.com/plusjade/jekyll-bootstrap.git jekyll

2.进入项目目录
>cd /f/jekyll

3.查看文件
<pre>
$ ls
404.html          Rakefile     _includes  _posts        assets           changelog.md  rss.xml
History.markdown  _config.yml  _layouts   _site         atom.xml         index.md      sitemap.txt
README.md         _drafts      _plugins   archive.html  categories.html  pages.html    tags.html
</pre>

4.启动服务
>jekyll server

##开始写文章
- 编写新文章(Post)
- 编写新页面(Page)

1.编写新文章(Create a Post)  

1.1）通过命令生成文章
<pre>
Administrator@PC121106ZS04 /f/jekyll (master)
$ rake post title="Hello World"
Creating new post: ./_posts/2014-01-22-hello-world.md

Administrator@PC121106ZS04 /f/jekyll (master)
$ ls _posts/
2014-01-22-hello-world.md  core-samples
</pre>

1.2）由上看到生成了年月日标题格式的文章，查看2014-01-22-hello-world.md
<pre>
Administrator@PC121106ZS04 /f/jekyll (master)
$ cat _posts/2014-01-22-hello-world.md
---
layout: post
title: "Hello World"
description: ""
category:
tags: []
---
{% include JB/setup %}
</pre>

1.3）添加内容到生成的2014-01-22-hello-world.md最后
<pre>
## 第一页，jekyll的开始

Jekyll is a parsing engine bundled as a ruby gem used to build static websites from
dynamic components such as templates, partials, liquid code, markdown, etc. Jekyll is known as "a simple, blog aware, static site generator".

### 博客文章：[用Jekyll构建基于bootstrap系统](http://blog.fens.me/jekyll-bootstarp-doc/)

程序员会写程序是基本技能，程序员会写文档是更高的能力。用简单的图形表达架构，用流畅语言描述业务，用专业的文笔写成报告，看似简单的要求，但对于普通的程序员来说都是一种挑战。

有时候我们纠结的不是怎么组织文字，而是怎么排版，用哪种字体，居中还是靠右放置？如何能保持多人撰写文档的统一风格？

Jekyll可以帮助我们标准化文档结构，文档样式，文档过程。剩下就是提升自己的知识基础了。
</pre>

1.4）保存后启动
<pre>
Administrator@PC121106ZS04 /f/jekyll (master)
$ jekyll serve
Configuration file: f:/jekyll/_config.yml
            Source: f:/jekyll
       Destination: f:/jekyll/_site
      Generating...   Conversion error: There was an error converting '_posts/2014-01-22-hello-world.md'.
error: incompatible encoding regexp match (UTF-8 regexp with GBK string). Use --trace to view backtrace
</pre>

启动失败，发现中文GBK编码导致


##**jelly中文乱码终极解决方案**  
###更换1
找到C:\ruby\lib\ruby\gems\2.0.0\gems\jekyll-1.4.2\lib\jekyll\convertible.rb的第38行
<pre>
        self.content = File.read_with_options(File.join(base, name),
                                              merged_file_read_opts(opts))
</pre>
将如下换成:
<pre>
self.content = File.read_with_options(File.join(base, name), :encoding => "utf-8")
</pre>

###更换2
找到C:\ruby\lib\ruby\gems\2.0.0\gems\jekyll-1.4.2\lib\jekyll\tags\include.rb的如下部分：
<pre>
File.read_with_options(file, file_read_opts(context))
</pre>
换成如下：
<pre>
File.read_with_options(file, :encoding => "utf-8")
</pre>

有关中文乱码其他解决方案请参考：  
<http://blog.jsfor.com/skill/2013/09/07/jekyll-local-structures-notes/>
<http://yanping.me/cn/blog/2012/10/09/chinese-charset-problems-with-jekyll/>
<https://github.com/fitztrev/jekyll-utf8>


保存后重新启动服务
<pre>
$ jekyll serve
Configuration file: f:/jekyll/_config.yml
            Source: f:/jekyll
       Destination: f:/jekyll/_site
      Generating... done.
    Server address: http://0.0.0.0:4000
  Server running... press ctrl-c to stop.
</pre>
打开<http://localhost:4000/2014/01/22/hello-world/>


2.编写新页面(Create a Page)
2.1）通过命令生成页面
<pre>
Administrator@PC121106ZS04 /f/jekyll (master)
$ rake page name="about.md"
mkdir -p .
Creating new page: ./about.md
</pre>
在about.md最后添加如下内容:
>关于作者<http://javacrazyer.iteye.com/>

再生成一个页面
<pre>
$ rake page name="pages/about"
mkdir -p ./pages/about
Creating new page: ./pages/about/index.html
</pre>
这个页面最后也可以添加一段内容，如下：
>我也是我一个页面

##发布到GitHub
在github网站，我们创建一个新的库，jekyll_demo2

把jekll项目，添加到jekyll_demo2
>git remote set-url origin git@github.com:cinowu/jekyll_demo2.git

因为是项目主页，所以创建分支
>git checkout gh-pages

修改_config.xml
>production_url : http://cinowu.github.io
>
>BASE_PATH : /jekyll_demo2

提交更改
>git add .
>
>git commit -m "add modify"
>
>git push origin gh-pages

大概十分钟之后访问：<http://cinowu.github.io/jekyll_demo2/>

本文参考自：<http://blog.fens.me/jekyll-bootstarp-github/>

**注意**我们前面两次讲到的都是本地更改后，github上创建一个新的库然后提交，都是基于项目首页的，如果已经提交之后再改，那么每次改之前都要在本地git pull origin gh-pages一下最新的变动

---


#开始创建站点博客了（非项目主页）  
<http://jekyllbootstrap.com/usage/jekyll-quick-start.html>

##在github上创建站点
在你自己的github主页创建新的Repository，命名为cinowu.github.io，具体参见<http://pages.github.com/>

##安装Jekyll-Bootstrap
>git clone git@github.com:plusjade/jekyll-bootstrap.git cinowu.github.io

>cd cinowu.github.io

关联到远端github仓库
>git remote set-url origin git@github.com:cinowu/cinowu.github.io.git


将bootstrap文件推送到github仓库
>git pull origin master
>
>git push origin master

等待几分钟看看<http://cinowu.github.io/>吧，已经是默认的bootstrap主页了

##创建post和page
这个过程（关于创建页面和本地调试jekyll）可以参见之前讲的`用Jekyll构建基于bootstrap模板`这篇文章

##修改信息
可以通过cinowu.github.io\_includes\themes\twitter\default.html修改底部信息
```html
 <footer>
        <p>&copy; {{ site.time | date: '%Y' }} 本博客由<a href="http://weibo.com/u/1747720793" target="_blank" title="Author's Sina Wibo Main Page">吴锦涛先生</a>基于<a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          和<a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>构建
        </p>
      </footer>
```

修改_config.yml
<pre>
title : 吴锦涛的个人博客
tagline: 入则孝-出则悌-谨而信-泛爱众-而亲仁
author :
  name : Jellon Wu
  email : jellon.wu@gmail.com
  github : cinowu
  twitter : jellonwu
  feedburner : jellonwu
production_url : http://cinowu.github.io
</pre>
无论任何时候主题都可以引用以上这些变量
注意，这里不用设置BASE_PATH这个变量，项目主页会用到

修改网站首页index.md

##删除bootstrap自带文章post
> rm -rf _posts/core-samples

##使用bootstrap主题
可以通过<http://themes.jekyllbootstrap.com/>或者<http://layouts-the.me.s3-website-us-east-1.amazonaws.com/>看到官方最新的主题  
看到官网的主题比较有限，我选择了<http://themes.jekyllbootstrap.com/preview/the-program/>这个主题，它在github上的地址<https://github.com/jekyllbootstrap/theme-the-program>

<https://github.com/pizn/kunka>  
<http://www.zhanxin.info/jekyll/2013-08-11-jekyll-theme-kunka.html>  

<https://github.com/mytharcher/SimpleGray>

###安装最新主题
>rake theme:install git="https://github.com/jekyllbootstrap/theme-the-program.git"

或者你从github上已经下载了主题包，那么直接手动放在./_theme_packages目录里也一样，然后执行如下：
>rake theme:install name="THEME-NAME"

作为友好提示，下载安装完成后，命令行会友好的提示要不要切换到最新主题，选择y即可
<pre>
Administrator@PC121106ZS04 /f/cinowu.github.io (master)
$ rake theme:install git="https://github.com/jekyllbootstrap/theme-the-program.git"
Cloning into './_theme_packages/_tmp'...
remote: Reusing existing pack: 40, done.
remote: Total 40 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (40/40), done.
Checking connectivity... done.
mv ./_theme_packages/_tmp ./_theme_packages/the-program
mkdir -p ./assets/themes/the-program/css
cp -r ./_theme_packages/the-program/assets/themes/the-program/css/style.css ./assets/themes/the-program/css/style.css
mkdir -p ./assets/themes/the-program/css
cp -r ./_theme_packages/the-program/assets/themes/the-program/css/style.less ./assets/themes/the-program/css/style.less
mkdir -p ./assets/themes/the-program/css
cp -r ./_theme_packages/the-program/assets/themes/the-program/css/_base.less ./assets/themes/the-program/css/_base.less
mkdir -p ./assets/themes/the-program/css
cp -r ./_theme_packages/the-program/assets/themes/the-program/css/_helper.less ./assets/themes/the-program/css/_helper.less
mkdir -p ./assets/themes/the-program/css
cp -r ./_theme_packages/the-program/assets/themes/the-program/css/_less-base.less ./assets/themes/the-program/css/_less-base.less
mkdir -p ./assets/themes/the-program/css
cp -r ./_theme_packages/the-program/assets/themes/the-program/css/_mediaqueries.less ./assets/themes/the-program/css/_mediaqueries
.less
mkdir -p ./assets/themes/the-program/css
cp -r ./_theme_packages/the-program/assets/themes/the-program/css/_module.less ./assets/themes/the-program/css/_module.less
mkdir -p ./assets/themes/the-program/css
cp -r ./_theme_packages/the-program/assets/themes/the-program/css/_syntaxhighlighter.less ./assets/themes/the-program/css/_syntaxh
ighlighter.less
mkdir -p ./assets/themes/the-program/font
cp -r ./_theme_packages/the-program/assets/themes/the-program/font/UbuntuMono-B-webfont.eot ./assets/themes/the-program/font/Ubunt
uMono-B-webfont.eot
mkdir -p ./assets/themes/the-program/font
cp -r ./_theme_packages/the-program/assets/themes/the-program/font/UbuntuMono-B-webfont.svg ./assets/themes/the-program/font/Ubunt
uMono-B-webfont.svg
mkdir -p ./assets/themes/the-program/font
cp -r ./_theme_packages/the-program/assets/themes/the-program/font/UbuntuMono-B-webfont.ttf ./assets/themes/the-program/font/Ubunt
uMono-B-webfont.ttf
mkdir -p ./assets/themes/the-program/font
cp -r ./_theme_packages/the-program/assets/themes/the-program/font/UbuntuMono-B-webfont.woff ./assets/themes/the-program/font/Ubun
tuMono-B-webfont.woff
mkdir -p ./assets/themes/the-program/skin
cp -r ./_theme_packages/the-program/assets/themes/the-program/skin/100-90-5-monochrome.png ./assets/themes/the-program/skin/100-90
-5-monochrome.png
mkdir -p ./_includes/themes/the-program
cp -r ./_theme_packages/the-program/_includes/themes/the-program/default.html ./_includes/themes/the-program/default.html
mkdir -p ./_includes/themes/the-program
cp -r ./_theme_packages/the-program/_includes/themes/the-program/page.html ./_includes/themes/the-program/page.html
mkdir -p ./_includes/themes/the-program
cp -r ./_theme_packages/the-program/_includes/themes/the-program/post.html ./_includes/themes/the-program/post.html
mkdir -p ./_includes/themes/the-program
cp -r ./_theme_packages/the-program/_includes/themes/the-program/settings.yml ./_includes/themes/the-program/settings.yml
=> the-program theme has been installed!
=> ---
=> Want to switch themes now? [y/n] y
Generating 'the-program' layout: default.html
Generating 'the-program' layout: page.html
Generating 'the-program' layout: post.html
=> Theme successfully switched!
=> Reload your web-page to check it out =)
</pre>

#切换主题
可以通过如下命令来回切换主题:
>rake theme:switch name="the-program"
<pre>
Administrator@PC121106ZS04 /f/cinowu.github.io (master)
$ rake theme:switch name="twitter"
Generating 'twitter' layout: default.html
Generating 'twitter' layout: page.html
Generating 'twitter' layout: post.html
=> Theme successfully switched!
=> Reload your web-page to check it out =)
</pre>

##博客相关配置
编辑./_config.yml
###更改博客文章url展现方式
通过`permalink: /:categories/:year/:month/:day/:title/`这个配置  
可以参考<http://jekyllrb.com/docs/permalinks/>

###1.引入第三方评论
参考：<http://www.liaolz.com/2013-04-20-how-to-use-duoshuo-on-jekyll/>  
bootstrap默认使用的[Disqus](http://disqus.com/)评论，如下：
<pre>
 comments :
    provider : disqus
    disqus :
      short_name : jekyllbootstrap
    livefyre :
      site_id : 123
    intensedebate :
      account : 123abc
    facebook :
      appid : 123
      num_posts: 5
      width: 580
      colorscheme: light
</pre>

当然你也可以选择使用其他国外的评论系统如[Intense Debate](http://intensedebate.com/), [livefyre](http://www.livefyre.com/), 和 [Facebook Comments](https://developers.facebook.com/docs/reference/plugins/comments/).

这里我没有选择国外评论系统，而是选择了国内最大的[多说duoshuo](http://duoshuo.com/)评论系统。当然国内还可以选择[搜狐畅言](http://changyan.sohu.com/)。

####>>1.1添加步骤
1.登录多说（我使用的是新浪微博登录），修改个人资料的名字为唯一名  
2.创建站点<http://duoshuo.com/create-site>，填写必要的信息，然后生成一段通用JS。  
  可以通过<http://cinowu.duoshuo.com/admin/>管理评论后台  
3.修改_config.yml
<pre>
 comments :
    provider : duoshuo
    duoshuo :
      name : cinowu
    disqus :
      short_name : 你的disqus唯一名
    livefyre :
      site_id : 123
    intensedebate :
      account : 123abc
    facebook :
      appid : 123
      num_posts: 5
      width: 580
      colorscheme: light
</pre>
注意上面cinowu就是你的duoshuo唯一名，如下这段是改动的地方
<pre>
    provider : duoshuo
    duoshuo :
      name : cinowu
</pre>

4.添加duoshuo文件  
在_includes\JB\comments-providers目录下创建文件duoshuo,填充入duoshuo上生成的[js代码](http://cinowu.duoshuo.com/admin/tools/)

5.修改comments代码  
修改_includes\JB\comments文件，加入一段代码块如下：
<pre>
{% when "duoshuo" %}
  {% include JB/comments-providers/duoshuo %}
</pre>

6.OK，然后执行添加提交上传命令即可
>git add --all
>
>git commit -m "add duoshuo comments"
>
>git push origin master

####>>1.2修改多说评论框样式
参考<http://liberize.me/post/jekyll-use-duoshuo-comment-system>  
最近比较流行圆形头像，咱也来试试。在你的 css 文件中添加以下代码，不仅可以让头像变成圆形，还可以让头像在鼠标放上去时进行360度旋转哦。
在_includes\JB\comments-providers\duoshuo上方添加如下css代码
```css
<style type="text/css">
#ds-reset .ds-avatar img {
  width: 54px !important;
  height: 54px !important;
  -webkit-border-radius: 27px !important;
  -moz-border-radius: 27px !important;
  border-radius: 27px !important;
  -webkit-transition: -webkit-transform 0.4s ease-out;
  -moz-transition: -moz-transform 0.4s ease-out;
  transition: transform 0.4s ease-out;
}
#ds-reset .ds-avatar img:hover {
  -webkit-transform: rotateZ(360deg);
  -moz-transform: rotateZ(360deg);
  transform: rotateZ(360deg);
}
</style>
```
本地调试发现，图像果然变圆了，还能旋转，酷！

不喜欢评论框底下显示“xx正在使用多说”等字样？咱把它隐藏掉！
```css
#ds-reset .ds-powered-by {
  display: none;
}
```

如果文章长度比较短，后面有大片空白，可能会出现多说评论框没有紧贴着文章末尾，而是显示在中间，不用担心，加入以下代码就解决了！
```css
#ds-thread {
  clear: none !important;
  float: left;
  margin-top: 0;
  width: 100%;
}
```


####>>1.3禁用评论
- 全局禁用  
	修改_config.yml
	>provider: false
- 单篇文章禁用
	在_posts里每篇文章前添加`comments : false`
	<pre>
	---
	layout: post
	category : lessons
	comments : false
	tags : [yay]
	---
	</pre>
	



###>>1.3添加返回顶部按钮
在根目录下创建css和js目录  
css\to-top.css内容如下：
```css
#back-top {
  position: fixed;
  bottom: 30px;
  margin-left: 1040px;
}
#back-top a {
  width: 54px;
  height: 54px;
  display: block;
  background: #ddd url(../img/bg_up_arrow.png) no-repeat center center;
  background-color: #aaa;
  -webkit-border-radius: 7px;
  -moz-border-radius: 7px;
  border-radius: 7px;
  -webkit-transition: 1s;
  -moz-transition: 1s;
  transition: 1s;
}
#back-top a:hover {
  background-color: #777;
}
```
由于用到了图片，所以在根目录创建img目录，将bg_up_arrow.png这个图片放入进去即可




js\to-top.js内容如下：
```javascript
$("#back-top").hide();
$(document).ready(function () {
  $(window).scroll(function () {
    if ($(this).scrollTop() > 100) {
      $('#back-top').fadeIn();
    } else {
      $('#back-top').fadeOut();
    }
  });
  $('#back-top a').click(function () {
    $('body,html').animate({
      scrollTop: 0
    }, 800);
    return false;
  });
});
```

光有这个js还不够，因为是用到jquery语法，所以js目录还应有个jquery-1.7.2.js


在_includes\目录下新建widgets目录，在widgets目录中创建back_top_button文件，填充如下内容:
```html
<div id="back-top">
  <a href="#top" title="回到顶部"></a>
</div>
<script src="/js/to-top.js" type="text/javascript"></script>
```


修改_includes\themes\the-program\default.html添加到如下地方
```hml
	</div><!-- body -->
	{% include widgets/back_top_button %}
	<footer class="the-footer">
```




###修改侧边导航名称
修改_includes\themes\the-program\default.html如下：
```html
<nav class="nav-global">
	<ul>
		<li class="logo"><a href="/">{{ site.title }}</a></li>
		<li class="archive"><a href="/archive.html">最近发表</a></li>
		<!--<li class="page"><a href="/pages.html">pages</a></li>-->
		<li class="category"><a href="/categories.html">文章分类</a></li>
		<li class="tag"><a href="/tags.html">标签云</a></li>
		<li class="forkme"><div><iframe src="http://markdotto.github.com/github-buttons/github-btn.html?user=plusjade&repo=jekyll-bootstrap&type=fork&count=true"
					allowtransparency="true" frameborder="0" scrolling="0" width="95px" height="20px"></iframe></div></li>
	</ul>
</nav>
```

每个导航对应根目录下有一个响应的html，你可以自由增删




###网站图标  
你还可以在网站的根目录下一个网站图标文件favicon.ico，样别人访问你的网站时，体验会更好一点。设计优秀的网站图标，能帮助访问者，更容易记住你的网站哦！  
可以通过<http://www.ico.la/>制作一张ico图标，选择像素32*32的即可

###引入第三方网站分析
这里我们选择的是百度分析，毕竟国内百度做的还不错，google经常访问不上
这个流程跟评论系统安装是一样的.

1.首先到[百度站长平台](http://zhanzhang.baidu.com/site/index)注册账号,添加自己的网站  
2.然后到[百度网站中心](http://sitecenter.baidu.com/)获取js代码
```javascript
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F5243f16e8323cfb1f459827ff821aff7' type='text/javascript'%3E%3C/script%3E"));
</script>

```

注意这里的`h.js%3F`后面跟着的那一大长串就是百度分析的tracking_id

3.修改_config.yml文件，如下
<pre>
  analytics :
    provider : baidu
    baidu : 
        tracking_id : '5243f16e8323cfb1f459827ff821aff7'
</pre>

4.在_includes\JB\analytics-providers创建baidu文件，填充如下内容:
```javascript
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F{{ site.JB.analytics.baidu.tracking_id }}' type='text/javascript'%3E%3C/script%3E"));
</script>
```

5.修改_includes\JB\analytics文件中的语句，添加如下代码块：
<pre>
{% when "baidu" %}
  {% include JB/analytics-providers/baidu %}
</pre>

6.这个时候添加提交上传，然后再回到[百度统计](http://tongji.baidu.com/web/6970912/overview/sole?siteId=4244648)页面查看是否有数据，一般添加代码正确后生成数据到百度需要20多分钟。代码安装是否正确，请查看<http://sitecenter.baidu.com/sc-web/6970912/home/js/check?siteId=4244648>。
安装正确后你会发现你的网站最下边会多出百度统计的图标,这个图标可以在百度后台切换的。

- [百度站长](http://zhanzhang.baidu.com/)
- [百度统计](http://tongji.baidu.com/)


###一键分享
国内目前有bshare、百度分享和jiathis，我选用了百度分享

直接复制生成的代码到模板默认页面:_includes\themes\the-program\default.html里：  
```html
<!--baidushare begin-->
			<div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_kaixin001" data-cmd="kaixin001" title="分享到开心网"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"32"},"share":{},"image":{"viewList":["tsina","tqq","weixin","qzone","kaixin001","renren"],"viewText":"分享到：","viewSize":"32"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","tqq","weixin","qzone","kaixin001","renren"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
			<!--baidushare end-->
				<div class="entry-content">
					{{ content }}
				</div>
				<!-- JiaThis Button BEGIN -->
				<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?move=0&amp;btn=r5.gif" charset="utf-8"></script>
				<!-- JiaThis Button END -->

```

可以通过百度分享账号进行数据分析  

- [百度分享](http://share.baidu.com/)  


###友情链接
这个很容易


###标签云
可以下载<https://github.com/roytanck/cumulus>里面的内容，然后像添加其他侧边栏一样添加这个云标签即可，不过我还没有研究动态生成标签，所有的标签都是我手动写到tagcloud.xml里面的，为了好看，也只能这样啦

###时钟日历
<http://www.clocklink.com/gallery.php?category=HTML5>  
时钟这个好弄，网上找了一个.日历没什么实际作用，不用了.  
日本时钟<http://chabudai.org/blog/?p=59>


###图片轮播
我采用的是jvm image imagerotator，可参考<http://www.sfirelife.com/?p=1594>，下载一个包即可使用,将图片地址定义在madrid.xml文件中即可

###3D地图
参考<http://www.revolvermaps.com/>非常好弄
还有这个<http://clustrmaps.com/zh/index.htm>

###实时统计系统  
<http://www.chinaz.com/free/2010/0811/125807.shtml>

国内的有<http://www.clicki.cn/>，还有<http://cnzz.com/>


###站内搜索框
参考  
<http://www.shanhh.com/blog/2012/11/16/tapir-search-for-jekyll/>  
<http://luyueming.info/blog/2013/05/21/add-static-search-with-tapir-in-your-blog>
1.首先修改根目录下atom.xml如下：
```xml
---
layout: nil
title : Atom Feed
---
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 <title>{{ site.title }}</title>
 <link href="{{ site.production_url }}/{{ site.atom_path }}" rel="self"/>
 <link href="{{ site.production_url }}"/>
 <updated>{{ site.time | date_to_xmlschema }}</updated>
 <id>{{ site.production_url }}</id>
 <author>
   <name>{{ site.author.name }}</name>
   <email>{{ site.author.email }}</email>
 </author>
 {% for post in site.posts %}
 <entry>
   <title>{{ post.title }}</title>
   <link href="{{ site.production_url }}{{ post.url }}"/>
   <updated>{{ post.date | date_to_xmlschema }}</updated>
   <id>{{ site.production_url }}{{ post.id }}</id>
   <content type="html">{{ post.content | xml_escape }}</content>
   <summary type="html">{{ post.description | xml_escape }}</summary>
 </entry>
 {% endfor %}
 
</feed>
```

2.添加如下这么一段到_layouts\default.xml中
```html
<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
```

3.访问<http://localhost:4000/atom.xml>能够完整显示，表示配置正确，然后部署到github
这时候的地址就是<http://cinowu.github.io/atom.xml>

4.使用<http://cinowu.github.io/atom.xml>到<http://tapirgo.com/>上面去注册，需要输入一个邮箱地址，然后点击GO,这时候生成一个token和一个secret token，注意保存好你的这两个值。
token这个值是待会配置需要的。

5.等待一到两分钟，tapirgo会根据你刚才的FEED地址进行索引构建，这时可以通过<http://tapirgo.com/api/1/search.json?token=52e20631a042b60200000001&query=my>这个链接访问，返回的结果是JSON，正确

6.下载[jquery-tapir.min.js](https://github.com/TapirGo/jQuery-Plugin)这个文件到你的js目录中

7.在_layouts\default.html中引入这个js:
```javascript
<script src="/js/jquery-tapir.min.js"></script>
```

8.在页面合适位置上创建一个搜索框：
```html
 <div align='left'>
	<form class="navbar-form" action="/search.html">
		<input type="text" class="form-control" placeholder="Search" name="query">
	</form>				  
 </div>
```
注意上面的这个，一定不能少了`name=query`这一个属性


9.因为搜索框请求了根目录下search.html，所以创建search.html:
```html
---
layout: page
title: 站内搜索 
header: Pages
---
<h2><font color='red'>搜索结果</font></h2>
  <div id="search_results"></div>
<script>
	$('#search_results').tapir({'token': '52e20631a042b60200000001'});
</script>
```

10.ok本地调试，可以搜到结果了，部署到github，缺陷是只能使用英文搜索


因为如上不能支持中文，所以我换了种，请参考<http://liberize.me/post/jekyll-static-blog-search.html>

###rss订阅
到http://www.feedsky.com/注册一个订阅地址
你的永久Feed地址为：
http://feed.feedsky.com/lmn5
然后会生成一段代码贴到博客中

###jekyll-cli
<https://github.com/jsw0528/jekyll-cli>

###page rank
http://www.prchecker.info/

###一键关注按钮，微博挂件（也称微博秀）
http://dev.t.qq.com/websites/useread?explain=1
http://open.weibo.com/widget/followbutton.php

http://app.weibo.com/tool/blogwidget/setting?id=12&ver=3
http://dev.t.qq.com/websites/useshow3?explain=3


###分页
因为有上一篇和下一篇，就不用做了

###点击分析
http://www.clicki.cn/

###网站流量统计
http://statcounter.com/ 
添加JS代码到网站，就能看到访客第多少多少位图标

###原创网络电台，背景音乐
<http://www.luocheng.cn/>
参考<http://wpaudioplayer.com/standalone/>

###sitemap
删掉默认带的sitemap.txt，新建个sitemap.xml,填充如下内容：  
```xml
---
# Remember to set production_url in your _config.yml file!
title : Sitemap
---
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    {% for post in site.posts %}
    <url>
      <loc>{{ site.production_url }}{{ post.url }}</loc>
      <changefreq>daily</changefreq>
      <lastmod>{{ post.date | date: "%Y-%m-%d"}}</lastmod>
      <priority>1.0</priority>
    </url>
    {% endfor %}

    {% for page in site.pages %}
    {% if page.layout != nil %}
    {% if page.layout != 'feed' %}
    {% if page.group == 'navigation' %}
    <url>
      <loc>{{ site.production_url }}{{ page.url | remove: 'index.html' }}</loc>
      <changefreq>monthly</changefreq>
      <priority>0.80</priority>
    </url>
    {% endif %}
    {% endif %}
    {% endif %}
    {% endfor %}

    <url>
      <loc>{{ site.production_url }}</loc>
      <changefreq>daily</changefreq>
      <priority>0.6</priority>
    </url>
</urlset>
```

###
网站优化，广告，SEO

###在线简历
https://about.me/

###二维码，微信
已经加上

###相册
图片放大效果：jquery.imagezoom.v1.0
利用http://pic.sdodo.com/tool/picadjust/进行小图40X40和中图310X310的裁剪
或者imagerotator

###文章导航article_nav
<http://dannpu.com/blog/2013/12/20/Minimum-Rank-Solutions/>

###文章草稿
<http://higrid.net/c-art-jekyll_post_draft.htm>

###代码高亮
不用做高亮了，markdown的高亮即可.

###reboot
当不想被搜索引擎抓取的时候可以配置这个

###百度加速乐
http://jiasule.baidu.com/
在您的网站遭受大规模DDOS攻击、监管部门要求对违规信息进行处理等紧急情况时，百度加速乐客服可能会通过电话、QQ等方式及时联系您，在此百度加速乐希望您完善以下资料，以便我们为您的网站提供更优质的服务！

###七牛云存储
会将所有静态资源都放到云存储上
我的邀请链接：https://portal.qiniu.com/signup?code=gmnfuiugtoy

<pre>
使用 Github Page 的博客由于服务器在国外，访问速度不佳，可以使用国内的 CDN 服务存储图片、js/css 等静态文件来为网站提速。事实上，因为整个网站都是静态的，可以把所有文件都放在 CDN 服务器上，但是这样就无法使用 Git 了。如果使用 Bootstrap 框架，可以将 assets 文件夹和图像放在 CDN 服务器上，以兼顾两头。

目前国内的 CDN 提供商有七牛、又拍等，此处选择七牛。七牛按存储空间、流量、请求次数计费，提供一定的免费额度，对于小站来说基本够用了，而且还有一些优惠活动。如果还没有七牛账号，可以点这里注册（这是我的邀请链接）。

假设网站资源文件都放在 /assets 目录下，图片放在 /images 目录下，要将这两个文件夹里的内容使用七牛加速，可以参考以下做法。

一、设置七牛

在七牛新建一个 bucket，命名为 liberize，设置为公开空间，则这个 bucket 里面的内容可以通过 liberize.u.qiniudn.com 访问。在"空间设置" - "基本设置" - "镜像存储"里面设置镜像源为博客地址 http://liberize.me/。设置了镜像存储以后，当访问 bucket 里面不存在的内容时会自动从镜像源获取。

二、修改_config.xml

在 _config.xml 文件中按如下设置。

safe: false
cdn_url : http://liberize.u.qiniudn.com

JB :
  ASSET_PATH : false
  IMAGE_PATH : false
三、修改_includes/JB/setup

修改 _includes/JB/setup 里面 {% if site.JB.ASSET_PATH %} 语句块，增加对 site.safe 的判断，同时类比写出 IMAGE_PATH 部分。这么做的好处是本地测试时将使用本地资源，而提交到 GitHub 后，将自动使用 site.cdn_url 指定的 CDN 服务器上的资源。为什么会有这种效果呢？因为 GitHub 默认是禁止插件的，在运行 jekyll 时会加上 --safe 参数，这将会覆盖 _config.yml 中的 safe: false 设置。

{% if site.JB.ASSET_PATH %}
  {% assign ASSET_PATH = site.JB.ASSET_PATH %}
{% elsif site.safe %}
  {% capture ASSET_PATH %}{{ site.cdn_url }}/assets/themes/{{ page.theme.name }}{% endcapture %}
{% else %}
  {% capture ASSET_PATH %}{{ BASE_PATH }}/assets/themes/{{ page.theme.name }}{% endcapture %}
{% endif %}

{% if site.JB.IMAGE_PATH %}
  {% assign IMAGE_PATH = site.JB.IMAGE_PATH %}
{% elsif site.safe %}
  {% capture IMAGE_PATH %}{{ site.cdn_url }}/images{% endcapture %}
{% else %}
  {% capture IMAGE_PATH %}{{ BASE_PATH }}/images{% endcapture %}
{% endif %}
以后需要在文章中插入图片时，只需将图片放到 /images 文件夹，然后使用 {{ IMAGE_PATH }}/图片文件名 格式就可以了。由于设置了镜像存储，不需要手动上传，但是当更改了 /assets 或 /images 里面的文件时，应当删除七牛服务器上的对应资源，否则访问的仍然是旧的资源。

除了用来做图床、CDN 加速以外，七牛还有图片处理（缩放、旋转、打水印等）、防盗链等功能，请参考官方文档。
</pre>

###cdn加速


###旧博客迁移
由于不是wordpress，所以iteye的迁移还得一步步手工完成

###网站许可
<http://creativecommons.org/licenses/by-nc-sa/3.0/cn/>
<http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh>





#最后鸣谢
liberize.github.com，所有我博客整体板式是参照他的博客进行改造的。